<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beiken.saas.platform.dao.InspectionTaskDao">
    <resultMap type="com.beiken.saas.platform.entity.InspectionTask" id="InspectionTaskMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="gmtCreate" column="gmt_create" jdbcType="TIMESTAMP"/>
        <result property="gmtModified" column="gmt_modified" jdbcType="TIMESTAMP"/>
        <result property="creator" column="creator" jdbcType="VARCHAR"/>
        <result property="modifier" column="modifier" jdbcType="VARCHAR"/>
        <result property="code" column="code" jdbcType="VARCHAR"/>
        <result property="parentCode" column="parent_code" jdbcType="VARCHAR"/>
        <result property="title" column="title" jdbcType="VARCHAR"/>
        <result property="planId" column="plan_id" jdbcType="INTEGER"/>
        <result property="dispatchTime" column="dispatch_time" jdbcType="TIMESTAMP"/>
        <result property="dispatchScope" column="dispatch_scope" jdbcType="VARCHAR"/>
        <result property="demandTime" column="demand_time" jdbcType="TIMESTAMP"/>
        <result property="itemList" column="item_list" jdbcType="VARCHAR"/>
        <result property="status" column="status" jdbcType="INTEGER"/>
        <result property="submitTime" column="submit_time" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="InspectionTaskMap">

                select
                  id, gmt_create, gmt_modified, creator, modifier, code, parent_code, title, plan_id, dispatch_time, dispatch_scope, demand_time, item_list, status, submit_time
                from safety.inspection_task
                where id = #{id}

    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="InspectionTaskMap">

                select
                  id, gmt_create, gmt_modified, creator, modifier, code, parent_code, title, plan_id, dispatch_time, dispatch_scope, demand_time, item_list, status, submit_time
                from safety.inspection_task
                limit #{offset}, #{limit}

    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="InspectionTaskMap">
        select
        id, gmt_create, gmt_modified, creator, modifier, code, parent_code, title, plan_id, dispatch_time,
        dispatch_scope, demand_time, item_list, status, submit_time
        from safety.inspection_task
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="gmtCreate != null">
                and gmt_create = #{gmtCreate}
            </if>
            <if test="gmtModified != null">
                and gmt_modified = #{gmtModified}
            </if>
            <if test="creator != null and creator != ''">
                and creator = #{creator}
            </if>
            <if test="modifier != null and modifier != ''">
                and modifier = #{modifier}
            </if>
            <if test="code != null and code != ''">
                and code = #{code}
            </if>
            <if test="parentCode != null and parentCode != ''">
                and parent_code = #{parentCode}
            </if>
            <if test="title != null and title != ''">
                and title = #{title}
            </if>
            <if test="planId != null">
                and plan_id = #{planId}
            </if>
            <if test="dispatchTime != null">
                and dispatch_time = #{dispatchTime}
            </if>
            <if test="dispatchScope != null and dispatchScope != ''">
                and dispatch_scope = #{dispatchScope}
            </if>
            <if test="demandTime != null">
                and demand_time = #{demandTime}
            </if>
            <if test="itemList != null and itemList != ''">
                and item_list = #{itemList}
            </if>
            <if test="status != null">
                and status = #{status}
            </if>
            <if test="submitTime != null">
                and submit_time = #{submitTime}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">

                insert into safety.inspection_task(gmt_create, gmt_modified, creator, modifier, code, parent_code, title, plan_id, dispatch_time, dispatch_scope, demand_time, item_list, status, submit_time)
                values (#{gmtCreate}, #{gmtModified}, #{creator}, #{modifier}, #{code}, #{parentCode}, #{title}, #{planId}, #{dispatchTime}, #{dispatchScope}, #{demandTime}, #{itemList}, #{status}, #{submitTime})

    </insert>

    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
        insert into safety.inspection_task(gmt_create, gmt_modified, creator, modifier, code, parent_code, title,
        plan_id, dispatch_time, dispatch_scope, demand_time, item_list, status, submit_time)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.gmtCreate}, #{entity.gmtModified}, #{entity.creator}, #{entity.modifier}, #{entity.code},
            #{entity.parentCode}, #{entity.title}, #{entity.planId}, #{entity.dispatchTime}, #{entity.dispatchScope},
            #{entity.demandTime}, #{entity.itemList}, #{entity.status}, #{entity.submitTime})
        </foreach>
    </insert>

    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
        insert into safety.inspection_task(gmt_create, gmt_modified, creator, modifier, code, parent_code, title,
        plan_id, dispatch_time, dispatch_scope, demand_time, item_list, status, submit_time)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.gmtCreate}, #{entity.gmtModified}, #{entity.creator}, #{entity.modifier}, #{entity.code},
            #{entity.parentCode}, #{entity.title}, #{entity.planId}, #{entity.dispatchTime}, #{entity.dispatchScope},
            #{entity.demandTime}, #{entity.itemList}, #{entity.status}, #{entity.submitTime})
        </foreach>
        on duplicate key update
        gmt_create = values(gmt_create) , gmt_modified = values(gmt_modified) , creator = values(creator) , modifier =
        values(modifier) , code = values(code) , parent_code = values(parent_code) , title = values(title) , plan_id =
        values(plan_id) , dispatch_time = values(dispatch_time) , dispatch_scope = values(dispatch_scope) , demand_time
        = values(demand_time) , item_list = values(item_list) , status = values(status) , submit_time =
        values(submit_time)
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update safety.inspection_task
        <set>
            <if test="gmtCreate != null">
                gmt_create = #{gmtCreate},
            </if>
            <if test="gmtModified != null">
                gmt_modified = #{gmtModified},
            </if>
            <if test="creator != null and creator != ''">
                creator = #{creator},
            </if>
            <if test="modifier != null and modifier != ''">
                modifier = #{modifier},
            </if>
            <if test="code != null and code != ''">
                code = #{code},
            </if>
            <if test="parentCode != null and parentCode != ''">
                parent_code = #{parentCode},
            </if>
            <if test="title != null and title != ''">
                title = #{title},
            </if>
            <if test="planId != null">
                plan_id = #{planId},
            </if>
            <if test="dispatchTime != null">
                dispatch_time = #{dispatchTime},
            </if>
            <if test="dispatchScope != null and dispatchScope != ''">
                dispatch_scope = #{dispatchScope},
            </if>
            <if test="demandTime != null">
                demand_time = #{demandTime},
            </if>
            <if test="itemList != null and itemList != ''">
                item_list = #{itemList},
            </if>
            <if test="status != null">
                status = #{status},
            </if>
            <if test="submitTime != null">
                submit_time = #{submitTime},
            </if>
        </set>
        where id = #{id}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">

                delete from safety.inspection_task where id = #{id}

    </delete>
</mapper>